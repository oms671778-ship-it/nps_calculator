<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Post-Test - NPS Calculator</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <style>
      :root {
        --primary: #0a2463;
        --primary-light: #1e40af;
        --primary-dark: #071a3b;
        --secondary: #ff6b35;
        --secondary-light: #ff8b5c;
        --accent: #3a86ff;
        --success: #38b000;
        --warning: #ff9e00;
        --error: #dc2626;
        --dark: #1e293b;
        --light: #f8fafc;
        --gray: #64748b;
        --gray-light: #e2e8f0;
        --gray-lighter: #f1f5f9;
        --border-radius: 12px;
        --border-radius-lg: 16px;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Scoped page layout */
      .page-wrapper {
        box-sizing: border-box;
      }

      .page-wrapper {
        font-family: Inter, "Segoe UI", system-ui, -apple-system, sans-serif;
        background: linear-gradient(135deg, #f8fafc 0, #f1f5f9 100%);
        color: var(--dark);
        line-height: 1.6;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 24px;
      }

      /* Header Styles */
      header {
        background: linear-gradient(
          135deg,
          var(--primary-dark),
          var(--primary)
        );
        color: white;
        padding: 1.2rem 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 1.6rem;
        font-weight: 700;
        letter-spacing: -0.5px;
      }

      .logo-icon {
        background: linear-gradient(
          135deg,
          var(--secondary),
          var(--secondary-light)
        );
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
      }

      nav ul {
        display: flex;
        list-style: none;
        gap: 2rem;
      }

      nav a {
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 0.95rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      nav a i {
        font-size: 0.9rem;
      }

      nav a:hover,
      nav a.active {
        color: white;
        background: rgba(255, 255, 255, 0.1);
      }

      /* Main Content */
      main {
        padding: 3rem 0;
      }

      /* Breadcrumb */
      .breadcrumb {
        background: white;
        padding: 1rem 1.5rem;
        border-radius: var(--border-radius);
        margin-bottom: 2rem;
        box-shadow: var(--shadow);
        font-size: 0.9rem;
        color: var(--gray);
      }

      .breadcrumb a {
        color: var(--primary);
        text-decoration: none;
        transition: var(--transition);
      }

      .breadcrumb a:hover {
        color: var(--accent);
        text-decoration: underline;
      }

      .breadcrumb span {
        margin: 0 8px;
        color: var(--gray-light);
      }

      /* Page Title */
      .page-title {
        text-align: center;
        margin-bottom: 3rem;
      }

      .page-title h1 {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--primary-dark);
        margin-bottom: 1rem;
        background: linear-gradient(135deg, var(--primary), var(--accent));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      .page-title p {
        font-size: 1.1rem;
        color: var(--gray);
        max-width: 800px;
        margin: 0 auto;
      }

      /* Posttest Container */
      .pretest-container {
        background: white;
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-lg);
        overflow: hidden;
        margin-bottom: 3rem;
      }

      .pretest-header {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-light)
        );
        color: white;
        padding: 2rem;
        text-align: center;
      }

      .pretest-header h2 {
        font-size: 1.8rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .pretest-header p {
        opacity: 0.9;
        font-size: 1rem;
      }

      .pretest-body {
        padding: 2.5rem;
      }

      /* Question Styles */
      .question {
        margin-bottom: 2.5rem;
        padding-bottom: 2rem;
        border-bottom: 2px solid var(--gray-lighter);
      }

      .question:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .question-number {
        display: inline-block;
        background: linear-gradient(
          135deg,
          var(--secondary),
          var(--secondary-light)
        );
        color: white;
        width: 32px;
        height: 32px;
        border-radius: 8px;
        text-align: center;
        line-height: 32px;
        font-weight: 700;
        margin-bottom: 1rem;
        font-size: 0.9rem;
      }

      .question-text {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--primary-dark);
        margin-bottom: 1.5rem;
        line-height: 1.5;
      }

      /* Options Styles */
      .options {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .option {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        padding: 1rem 1.5rem;
        background: var(--gray-lighter);
        border-radius: 10px;
        border: 2px solid transparent;
        transition: var(--transition);
        cursor: pointer;
      }

      .option:hover {
        background: var(--gray-light);
        transform: translateY(-2px);
      }

      .option.selected {
        background: rgba(10, 36, 99, 0.05);
        border-color: var(--primary);
        box-shadow: 0 4px 12px rgba(10, 36, 99, 0.1);
      }

      .option.correct {
        background: rgba(56, 176, 0, 0.1);
        border-color: var(--success);
      }

      .option.incorrect {
        background: rgba(220, 38, 38, 0.1);
        border-color: var(--error);
      }

      .option input[type="radio"] {
        display: none;
      }

      .option-circle {
        width: 24px;
        height: 24px;
        border: 2px solid var(--gray);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        transition: var(--transition);
        position: relative;
      }

      .option.selected .option-circle {
        border-color: var(--primary);
        background: var(--primary);
      }

      .option.correct .option-circle {
        border-color: var(--success);
        background: var(--success);
      }

      .option.incorrect .option-circle {
        border-color: var(--error);
        background: var(--error);
      }

      .option-circle::after {
        content: "";
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: white;
        opacity: 0;
        transition: var(--transition);
      }

      .option.selected .option-circle::after,
      .option.correct .option-circle::after,
      .option.incorrect .option-circle::after {
        opacity: 1;
      }

      .option-text {
        flex: 1;
        font-size: 1rem;
        color: var(--dark);
        line-height: 1.5;
      }

      /* Button Container */
      .button-container {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 2px solid var(--gray-lighter);
      }

      .btn {
        padding: 1rem 2.5rem;
        border: none;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 180px;
        justify-content: center;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-light)
        );
        color: white;
        box-shadow: 0 4px 15px rgba(10, 36, 99, 0.2);
      }

      .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(10, 36, 99, 0.3);
        background: linear-gradient(
          135deg,
          var(--primary-light),
          var(--accent)
        );
      }

      .btn-secondary {
        background: white;
        color: var(--dark);
        border: 2px solid var(--gray-light);
      }

      .btn-secondary:hover {
        background: var(--gray-lighter);
        border-color: var(--gray);
        transform: translateY(-2px);
      }

      /* Results Panel */
      .results-panel {
        background: white;
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-lg);
        padding: 2.5rem;
        margin-top: 2rem;
        text-align: center;
        display: none;
        animation: fadeIn 0.6s ease-out;
      }

      .results-header {
        margin-bottom: 2rem;
      }

      .results-icon {
        font-size: 4rem;
        margin-bottom: 1.5rem;
      }

      .results-panel.success .results-icon {
        color: var(--success);
      }

      .results-panel.average .results-icon {
        color: var(--warning);
      }

      .results-panel.poor .results-icon {
        color: var(--error);
      }

      .results-title {
        font-size: 2rem;
        font-weight: 800;
        color: var(--primary-dark);
        margin-bottom: 0.5rem;
      }

      .results-score {
        font-size: 3.5rem;
        font-weight: 800;
        margin: 1rem 0;
        background: linear-gradient(135deg, var(--primary), var(--accent));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      .results-message {
        color: var(--gray);
        font-size: 1.1rem;
        margin-bottom: 2rem;
        line-height: 1.6;
      }

      .score-breakdown {
        background: var(--gray-lighter);
        border-radius: var(--border-radius);
        padding: 1.5rem;
        margin: 2rem 0;
      }

      .score-item {
        display: flex;
        justify-content: space-between;
        padding: 0.8rem 0;
        border-bottom: 1px solid var(--gray-light);
      }

      .score-item:last-child {
        border-bottom: none;
        font-weight: 700;
        color: var(--primary);
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Footer */
      footer {
        background: var(--primary-dark);
        color: white;
        padding: 3rem 0 2rem;
        margin-top: 4rem;
      }

      .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .footer-logo {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .footer-logo-icon {
        font-size: 2rem;
        color: var(--secondary);
      }

      .footer-logo-text {
        font-size: 1.5rem;
        font-weight: 700;
      }

      .copyright {
        text-align: center;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.9rem;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .header-content {
          flex-direction: column;
          gap: 1.5rem;
        }

        nav ul {
          flex-wrap: wrap;
          justify-content: center;
        }

        .page-title h1 {
          font-size: 2rem;
        }

        .pretest-body {
          padding: 1.5rem;
        }

        .button-container {
          flex-direction: column;
          align-items: center;
        }

        .btn {
          width: 100%;
          max-width: 300px;
        }

        .footer-content {
          flex-direction: column;
          text-align: center;
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 0 16px;
        }

        .pretest-header {
          padding: 1.5rem;
        }

        .pretest-header h2 {
          font-size: 1.5rem;
        }

        .question-text {
          font-size: 1.1rem;
        }

        .option {
          padding: 1rem;
        }
      }
    </style>
  </head>

  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <div class="logo-icon">
              <i class="fas fa-clipboard-check"></i>
            </div>
            <span>NPS Calculator - Post-Test</span>
          </div>
          <nav>
            <ul>
              <li>
                <a href="index.html"><i class="fas fa-home"></i> Home</a>
              </li>
              <li>
                <a href="aim.html"><i class="fas fa-bullseye"></i> Aim</a>
              </li>
              <li>
                <a href="pretest.html"
                  ><i class="fas fa-question-circle"></i> Pretest</a
                >
              </li>
              <li>
                <a href="simulation.html"
                  ><i class="fas fa-calculator"></i> Calculator</a
                >
              </li>
              <li>
                <a href="certificate.html" class="active"
                  ><i class="fas fa-award"></i> Generate Certificate</a
                >
              </li>
              <li>
                <a href="feedback.html"
                  ><i class="fas fa-comment-alt"></i> Feedback</a
                >
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container">
      <div class="page-wrapper">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
          <a href="#">Engineering Mathematics</a>
          <span>/</span>
          <a href="index.html">NPS Calculator Virtual Lab</a>
          <span>/</span>
          <span>Post-Test</span>
        </div>

        <!-- Page Title -->
        <div class="page-title">
          <h1>Post-Experiment Assessment</h1>
          <p>
            Test your understanding of advanced NPS concepts and mathematical
            calculations after completing the simulation experiment.
          </p>
        </div>

        <!-- Posttest Container -->
        <div class="pretest-container">
          <!-- Header -->
          <div class="pretest-header">
            <h2>Advanced NPS Calculator - Post-Test</h2>
            <p>
              Challenge yourself with these advanced questions. All questions
              are mandatory.
            </p>
          </div>

          <!-- Body -->
          <div class="pretest-body">
            <form id="posttestForm">
              <!-- Question 1 -->
              <div class="question">
                <div class="question-number">1</div>
                <div class="question-text">
                  In the NPS simulation, if you increase the expected annual
                  return from 8% to 10% while keeping contribution and tenure
                  same, which component grows the most?
                </div>
                <div class="options">
                  <div class="option" data-value="a">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Total amount of contributions made by the investor
                    </div>
                  </div>
                  <div class="option" data-value="b">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Interest earned component of the final retirement corpus
                    </div>
                  </div>
                  <div class="option" data-value="c">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Number of years in the investment period
                    </div>
                  </div>
                  <div class="option" data-value="d">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Monthly contribution required for the same target corpus
                    </div>
                  </div>
                </div>
              </div>

              <!-- Question 2 -->
              <div class="question">
                <div class="question-number">2</div>
                <div class="question-text">
                  The simulation uses the formula \( FV = P \times \frac{(1 +
                  i)^n - 1}{i} \times (1 + i) \) for annuity due. Which change
                  will have the largest impact on \( FV \) over a long horizon?
                </div>
                <div class="options">
                  <div class="option" data-value="a">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Decreasing the number of contribution months by 6
                    </div>
                  </div>
                  <div class="option" data-value="b">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Increasing the monthly contribution by 5%
                    </div>
                  </div>
                  <div class="option" data-value="c">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Increasing the annual return rate by 1%
                    </div>
                  </div>
                  <div class="option" data-value="d">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Changing contribution from start-of-month to end-of-month
                    </div>
                  </div>
                </div>
              </div>

              <!-- Question 3 -->
              <div class="question">
                <div class="question-number">3</div>
                <div class="question-text">
                  In the NPS rules, at least 40% of the corpus must be used to
                  buy an annuity at retirement. If you choose to use exactly 60%
                  for annuity instead of 40%, what happens to your monthly
                  pension estimate in the simulation?
                </div>
                <div class="options">
                  <div class="option" data-value="a">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Monthly pension decreases because more money is locked
                    </div>
                  </div>
                  <div class="option" data-value="b">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Monthly pension increases because larger corpus generates
                      higher annuity
                    </div>
                  </div>
                  <div class="option" data-value="c">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Monthly pension remains the same; only tax benefit changes
                    </div>
                  </div>
                  <div class="option" data-value="d">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Monthly pension becomes zero because withdrawal is higher
                    </div>
                  </div>
                </div>
              </div>

              <!-- Question 4 -->
              <div class="question">
                <div class="question-number">4</div>
                <div class="question-text">
                  If the simulation shows a “return multiple” of 4.5, what does
                  this indicate in terms of your investment and final corpus?
                </div>
                <div class="options">
                  <div class="option" data-value="a">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      The corpus is 4.5 times the annual contribution
                    </div>
                  </div>
                  <div class="option" data-value="b">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      The corpus is 4.5 times the total amount invested over all
                      years
                    </div>
                  </div>
                  <div class="option" data-value="c">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      The corpus grows at 4.5% per year
                    </div>
                  </div>
                  <div class="option" data-value="d">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      The interest earned is 4.5 times the monthly contribution
                    </div>
                  </div>
                </div>
              </div>

              <!-- Question 5 -->
              <div class="question">
                <div class="question-number">5</div>
                <div class="question-text">
                  After experimenting with different ages of entry in the
                  simulation, which conclusion best explains the effect of an
                  early start on NPS corpus?
                </div>
                <div class="options">
                  <div class="option" data-value="a">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Starting later but investing more monthly always beats
                      early start
                    </div>
                  </div>
                  <div class="option" data-value="b">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Starting earlier allows compound interest to work longer,
                      significantly increasing final corpus
                    </div>
                  </div>
                  <div class="option" data-value="c">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Start age only affects tax benefit under Section 80CCD(1B)
                    </div>
                  </div>
                  <div class="option" data-value="d">
                    <div class="option-circle"></div>
                    <div class="option-text">
                      Start age has no impact; only annuity rate matters
                    </div>
                  </div>
                </div>
              </div>

              <!-- Buttons -->
              <div class="button-container">
                <button type="button" class="btn btn-secondary" id="resetBtn">
                  <i class="fas fa-redo"></i> Reset
                </button>
                <button type="button" class="btn btn-primary" id="submitBtn">
                  <i class="fas fa-paper-plane"></i> Submit Test
                </button>
              </div>
            </form>

            <!-- Results Panel -->
            <div class="results-panel" id="resultsPanel">
              <div class="results-header">
                <div class="results-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <h2 class="results-title">Post-Test Results</h2>
                <div class="results-score" id="finalScore">0/5</div>
                <div class="results-message" id="resultMessage">
                  Based on your score, you may revisit the simulation and theory
                  to strengthen your concepts.
                </div>
              </div>

              <div class="score-breakdown">
                <div class="score-item">
                  <span>Total Questions</span>
                  <span>5</span>
                </div>
                <div class="score-item">
                  <span>Correct Answers</span>
                  <span id="correctAnswers">0</span>
                </div>
                <div class="score-item">
                  <span>Score Percentage</span>
                  <span id="scorePercentage">0</span>
                </div>
              </div>

              <div class="button-container">
                <button type="button" class="btn btn-secondary" id="retryBtn">
                  <i class="fas fa-sync-alt"></i> Retry Test
                </button>
                <button type="button" class="btn btn-primary" id="proceedBtn">
                  <i class="fas fa-comment-alt"></i> Proceed to Feedback
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-content">
          <div class="footer-logo">
            <i class="fas fa-university footer-logo-icon"></i>
            <div class="footer-logo-text">NPS Calculator</div>
          </div>
          <div>
            <p style="color: rgba(255, 255, 255, 0.8)">
              Applied Sciences &amp; Humanities Department<br />
              Pimpri Chinchwad College of Engineering
            </p>
          </div>
        </div>
        <div class="copyright">
          <p>
            © 2025 NPS Calculator - Engineering Mathematics Experiment. All
            Rights Reserved.
          </p>
        </div>
      </div>
    </footer>

    <script>
      // Correct answers for each question (based on advanced NPS concepts)
      const correctAnswers = {
        1: "b", // Interest component grows more
        2: "c", // Increasing annual return has large effect via compounding
        3: "b", // Higher annuity portion => higher monthly pension
        4: "b", // Corpus is 4.5x total invested
        5: "b", // Early start + compounding
      };

      // Store user selections
      let userAnswers = {};

      document.addEventListener("DOMContentLoaded", function () {
        // Option click handling
        document.querySelectorAll(".option").forEach((option) => {
          option.addEventListener("click", function () {
            const question = this.closest(".question");
            const questionNumber = question
              .querySelector(".question-number")
              .textContent.trim();
            const optionValue = this.getAttribute("data-value");

            // Remove selected from other options in same question
            question
              .querySelectorAll(".option")
              .forEach((opt) => opt.classList.remove("selected"));

            // Mark this as selected
            this.classList.add("selected");

            // Store answer
            userAnswers[questionNumber] = optionValue;
          });
        });

        // Reset button
        document
          .getElementById("resetBtn")
          .addEventListener("click", function () {
            resetPosttest();
          });

        // Submit button
        document
          .getElementById("submitBtn")
          .addEventListener("click", function () {
            submitPosttest();
          });

        // Retry button
        document
          .getElementById("retryBtn")
          .addEventListener("click", function () {
            resetPosttest();
            document.getElementById("resultsPanel").style.display = "none";
          });

        // Proceed button -> go to feedback page
        document
          .getElementById("proceedBtn")
          .addEventListener("click", function () {
            window.location.href = "feedback.html";
          });
      });

      function resetPosttest() {
        // Clear selections
        document.querySelectorAll(".option").forEach((option) => {
          option.classList.remove("selected", "correct", "incorrect");
        });

        // Reset stored answers
        userAnswers = {};

        // Reset submit button
        const submitBtn = document.getElementById("submitBtn");
        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Test';
        submitBtn.disabled = false;

        // Hide results
        document.getElementById("resultsPanel").style.display = "none";
      }

      function submitPosttest() {
        const totalQuestions = Object.keys(correctAnswers).length;
        const answeredQuestions = Object.keys(userAnswers).length;

        // Check all answered
        if (answeredQuestions < totalQuestions) {
          alert(
            `Please answer all ${totalQuestions} questions before submitting.`
          );
          return;
        }

        let score = 0;

        // Clear previous correct/incorrect styling
        document.querySelectorAll(".option").forEach((option) => {
          option.classList.remove("correct", "incorrect");
        });

        // Evaluate
        Object.keys(correctAnswers).forEach((questionNum) => {
          const userAnswer = userAnswers[questionNum];
          const correctAnswer = correctAnswers[questionNum];

          const questionIndex = parseInt(questionNum, 10);
          const questionDiv = document.querySelector(
            `.question:nth-child(${questionIndex})`
          );
          const options = questionDiv.querySelectorAll(".option");

          options.forEach((option) => {
            const optionValue = option.getAttribute("data-value");

            if (optionValue === correctAnswer) {
              option.classList.add("correct");
            } else if (
              optionValue === userAnswer &&
              userAnswer !== correctAnswer
            ) {
              option.classList.add("incorrect");
            }

            option.classList.remove("selected");
          });

          if (userAnswer === correctAnswer) {
            score++;
          }
        });

        const percentage = (score / totalQuestions) * 100;

        // Update results
        document.getElementById(
          "finalScore"
        ).textContent = `${score}/${totalQuestions}`;
        document.getElementById("correctAnswers").textContent = score;
        document.getElementById("scorePercentage").textContent =
          percentage.toFixed(0) + "%";

        const resultMessage = document.getElementById("resultMessage");
        const resultsPanel = document.getElementById("resultsPanel");
        const icon = resultsPanel.querySelector(".results-icon i");

        if (percentage >= 80) {
          resultMessage.textContent =
            "Excellent! You have a strong understanding of advanced NPS concepts and simulation results. You are well-prepared.";
          resultsPanel.className = "results-panel success";
          icon.className = "fas fa-trophy";
        } else if (percentage >= 60) {
          resultMessage.textContent =
            "Good effort! You have understood most advanced concepts. Consider revisiting the simulation and theory for even better clarity.";
          resultsPanel.className = "results-panel average";
          icon.className = "fas fa-chart-line";
        } else {
          resultMessage.textContent =
            "We recommend revisiting the theory and trying a few more simulation scenarios to strengthen your understanding before moving ahead.";
          resultsPanel.className = "results-panel poor";
          icon.className = "fas fa-book";
        }

        resultsPanel.style.display = "block";

        // Disable submit to avoid multiple submissions
        const submitBtn = document.getElementById("submitBtn");
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-check-circle"></i> Submitted';

        // Scroll to results
        resultsPanel.scrollIntoView({ behavior: "smooth" });
      }
    </script>
  </body>
</html>
